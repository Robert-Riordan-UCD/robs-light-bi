{{ define "main" }}

<div class="intro-header no-img">
</div>

<div class="container" role="main">
  <div>
    {{ with .Content }}
    <div class="well" style="text-align:center">
      {{.}}
    </div>
    {{ end }}

    <div class="my-grid">
    {{ range .Site.Pages }}
      {{ if .Params.frontpage }}
        {{ partial "post_preview_card" . }}
      {{ end }}
    {{ end }}
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script>
    <script>
      // var grid = document.querySelector('.my-grid');
      // var msnry = new Masonry( grid, {
      //   itemSelector: '.my-grid-item',
      // });
      var masonryRow = document.querySelector('.my-grid'); // Targeting the Masonry container
      if (masonryRow) {
          imagesLoaded(masonryRow, function() {
              // Initialize Masonry after all images have loaded
              new Masonry(masonryRow, {
                itemSelector: '.my-grid-item'
              });
          });
        }
    // $(window).load(function(){
    //     var $container = $('.my-grid');
    //     $container.imagesLoaded( function() {
    //         $container.masonry({itemSelector: '.my-grid-item'});
    //     });
    // });
    </script>

  </div>
</div>

{{ end }}
